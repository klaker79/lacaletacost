{"version":3,"file":"main-BP6WGAQv.js","sources":["../../src/ui/toast.js","../../src/utils/dom-helpers.js","../../src/utils/helpers.js","../../src/modules/ingredientes/ingredientes-ui.js","../../src/modules/ingredientes/ingredientes-crud.js","../../src/modules/recetas/recetas-ui.js","../../src/modules/recetas/recetas-crud.js","../../src/modules/proveedores/proveedores-ui.js","../../src/modules/proveedores/proveedores-crud.js","../../src/modules/pedidos/pedidos-ui.js","../../src/modules/pedidos/pedidos-crud.js","../../src/modules/ventas/ventas-ui.js","../../src/modules/ventas/ventas-crud.js","../../src/modules/dashboard/dashboard.js","../../src/modules/export/pdf-generator.js","../../src/modules/export/pdf-helper.js","../../src/main.js?v=1734737962"],"sourcesContent":["/**\n * Sistema de notificaciones Toast\n * Muestra mensajes temporales al usuario\n */\n\n/**\n * Muestra un mensaje toast\n * @param {string} message - Mensaje a mostrar\n * @param {string} type - Tipo: 'success', 'error', 'warning', 'info'\n */\nexport function showToast(message, type = 'success') {\n  const container = document.getElementById('toast-container');\n  if (!container) {\n    console.error('toast-container no encontrado en DOM');\n    return;\n  }\n\n  const toast = document.createElement('div');\n  toast.className = `toast ${type}`;\n\n  const icons = { \n    success: '‚úÖ', \n    error: '‚ùå', \n    warning: '‚ö†Ô∏è', \n    info: '‚ÑπÔ∏è' \n  };\n\n  // Crear estructura HTML con progress bar\n  toast.innerHTML = `\n    <div class=\"toast-icon\">${icons[type] || icons.info}</div>\n    <div class=\"toast-message\"></div>\n    <div class=\"toast-progress\"></div>\n  `;\n  \n  // Establecer mensaje de forma segura (previene XSS)\n  const messageEl = toast.querySelector('.toast-message');\n  if (messageEl) {\n    messageEl.textContent = message;\n  }\n\n  // Estilos premium para toast\n  toast.style.cssText = `\n    animation: slideInDown 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);\n    border-radius: 12px;\n    backdrop-filter: blur(10px);\n  `;\n\n  const progressBar = toast.querySelector('.toast-progress');\n  if (progressBar) {\n    progressBar.style.cssText = `\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      height: 4px;\n      background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#f59e0b'};\n      width: 100%;\n      animation: progressShrink 3s linear;\n      border-radius: 0 0 12px 12px;\n    `;\n  }\n\n  container.appendChild(toast);\n  \n  // Auto-cerrar despu√©s de 3 segundos\n  setTimeout(() => {\n    toast.style.animation = 'slideOutUp 0.4s cubic-bezier(0.4, 0, 1, 1)';\n    setTimeout(() => toast.remove(), 400);\n  }, 3000);\n}\n\n// A√±adir animaciones CSS al DOM si no existen\nif (!document.getElementById('toast-animations')) {\n  const style = document.createElement('style');\n  style.id = 'toast-animations';\n  style.textContent = `\n    @keyframes slideInDown {\n      from {\n        transform: translateY(-100px);\n        opacity: 0;\n      }\n      to {\n        transform: translateY(0);\n        opacity: 1;\n      }\n    }\n    @keyframes slideOutUp {\n      from {\n        transform: translateY(0);\n        opacity: 1;\n      }\n      to {\n        transform: translateY(-100px);\n        opacity: 0;\n      }\n    }\n    @keyframes progressShrink {\n      from { width: 100%; }\n      to { width: 0%; }\n    }\n  `;\n  document.head.appendChild(style);\n}\n\n/**\n * Alias para compatibilidad con c√≥digo existente\n */\nexport default showToast;\n","/**\n * DOM Helpers - Funciones seguras para acceso al DOM\n * Previene crashes por elementos null/undefined\n */\n\n/**\n * Obtiene elemento por ID de forma segura\n * @param {string} id - ID del elemento\n * @param {string} context - Contexto para debugging\n * @returns {HTMLElement|null}\n */\nexport function getElement(id, context = '') {\n    const element = document.getElementById(id);\n    if (!element && context) {\n        console.warn(`[DOM] Elemento '${id}' no encontrado en contexto: ${context}`);\n    }\n    return element;\n}\n\n/**\n * Establece texto de un elemento de forma segura\n * @param {string} id - ID del elemento\n * @param {string} text - Texto a establecer\n * @param {string} fallback - Texto por defecto si elemento no existe\n */\nexport function setElementText(id, text, fallback = '') {\n    const element = getElement(id);\n    if (element) {\n        element.textContent = text;\n    } else if (fallback) {\n        console.warn(`[DOM] No se pudo establecer texto en '${id}', usando fallback`);\n    }\n}\n\n/**\n * Establece HTML de un elemento de forma segura\n * ADVERTENCIA: Solo usar con HTML trusted, no con input de usuario\n * @param {string} id - ID del elemento  \n * @param {string} html - HTML a establecer\n */\nexport function setElementHTML(id, html) {\n    const element = getElement(id);\n    if (element) {\n        element.innerHTML = html;\n    }\n}\n\n/**\n * Obtiene valor de input de forma segura\n * @param {string} id - ID del input\n * @returns {string}\n */\nexport function getInputValue(id) {\n    const element = getElement(id);\n    return element ? element.value : '';\n}\n\n/**\n * Establece valor de input de forma segura\n * @param {string} id - ID del input\n * @param {string} value - Valor a establecer\n */\nexport function setInputValue(id, value) {\n    const element = getElement(id);\n    if (element) {\n        element.value = value;\n    }\n}\n\n/**\n * A√±ade clase a elemento de forma segura\n * @param {string} id - ID del elemento\n * @param {string} className - Clase a a√±adir\n */\nexport function addElementClass(id, className) {\n    const element = getElement(id);\n    if (element) {\n        element.classList.add(className);\n    }\n}\n\n/**\n * Elimina clase de elemento de forma segura\n * @param {string} id - ID del elemento\n * @param {string} className - Clase a eliminar\n */\nexport function removeElementClass(id, className) {\n    const element = getElement(id);\n    if (element) {\n        element.classList.remove(className);\n    }\n}\n\n/**\n * Toggle clase de elemento de forma segura\n * @param {string} id - ID del elemento\n * @param {string} className - Clase a toggle\n */\nexport function toggleElementClass(id, className) {\n    const element = getElement(id);\n    if (element) {\n        element.classList.toggle(className);\n    }\n}\n\n/**\n * Muestra elemento (display: block)\n * @param {string} id - ID del elemento\n */\nexport function showElement(id) {\n    const element = getElement(id);\n    if (element) {\n        element.style.display = 'block';\n    }\n}\n\n/**\n * Oculta elemento (display: none)\n * @param {string} id - ID del elemento\n */\nexport function hideElement(id) {\n    const element = getElement(id);\n    if (element) {\n        element.style.display = 'none';\n    }\n}\n","/**\n * Utilidades Compartidas - LaCaleta App\n * Funciones de UI y exportaci√≥n usadas en toda la aplicaci√≥n\n */\n\n/**\n * Muestra un toast de notificaci√≥n\n * @param {string} message - Mensaje a mostrar\n * @param {string} type - Tipo: 'success' | 'error' | 'warning' | 'info'\n */\nexport function showToast(message, type = 'success') {\n    const container = document.getElementById('toast-container');\n    if (!container) {\n        console.warn('[Toast] Contenedor toast-container no encontrado');\n        return;\n    }\n\n    const toast = document.createElement('div');\n    toast.className = `toast ${type}`;\n\n    const icons = { success: '‚úÖ', error: '‚ùå', warning: '‚ö†Ô∏è', info: '‚ÑπÔ∏è' };\n\n    // Crear estructura sin inyectar mensaje directamente (previene XSS)\n    toast.innerHTML = `\n        <div class=\"toast-icon\">${icons[type] || '‚ÑπÔ∏è'}</div>\n        <div class=\"toast-message\"></div>\n    `;\n\n    // Establecer mensaje de forma segura\n    toast.querySelector('.toast-message').textContent = message;\n\n    container.appendChild(toast);\n\n    setTimeout(() => {\n        toast.style.animation = 'slideIn 0.3s ease reverse';\n        setTimeout(() => toast.remove(), 300);\n    }, 3000);\n}\n\n/**\n * Muestra overlay de carga\n */\nexport function showLoading() {\n    const overlay = document.getElementById('loading-overlay');\n    if (overlay) {\n        overlay.classList.add('active');\n    }\n}\n\n/**\n * Oculta overlay de carga\n */\nexport function hideLoading() {\n    const overlay = document.getElementById('loading-overlay');\n    if (overlay) {\n        overlay.classList.remove('active');\n    }\n}\n\n/**\n * Exporta datos a Excel usando SheetJS (XLSX)\n * @param {Array} datos - Array de objetos a exportar\n * @param {string} nombreArchivo - Nombre base del archivo\n * @param {Array} columnas - Configuraci√≥n de columnas [{header, key} o {header, value: fn}]\n */\nexport function exportarAExcel(datos, nombreArchivo, columnas) {\n    // Verificar que XLSX est√© disponible\n    if (typeof XLSX === 'undefined') {\n        console.error('[Excel] SheetJS (XLSX) no est√° cargado');\n        showToast('Error: Librer√≠a Excel no disponible', 'error');\n        return;\n    }\n\n    if (!datos || !Array.isArray(datos) || datos.length === 0) {\n        showToast('No hay datos para exportar', 'warning');\n        return;\n    }\n\n    try {\n        // Preparar datos para Excel\n        const datosExcel = datos.map(item => {\n            const fila = {};\n            columnas.forEach(col => {\n                fila[col.header] = col.key ? item[col.key] : col.value(item);\n            });\n            return fila;\n        });\n\n        // Crear libro y hoja\n        const wb = XLSX.utils.book_new();\n        const ws = XLSX.utils.json_to_sheet(datosExcel);\n\n        // Ajustar ancho de columnas\n        ws['!cols'] = columnas.map(() => ({ wch: 20 }));\n\n        XLSX.utils.book_append_sheet(wb, ws, \"Datos\");\n\n        // Descargar con fecha\n        const fecha = new Date().toISOString().split('T')[0];\n        XLSX.writeFile(wb, `${nombreArchivo}_${fecha}.xlsx`);\n\n        showToast('Excel descargado correctamente', 'success');\n    } catch (error) {\n        console.error('[Excel] Error exportando:', error);\n        showToast('Error al exportar Excel', 'error');\n    }\n}\n\n/**\n * Formatea n√∫mero a moneda EUR\n * @param {number} value - Valor a formatear\n * @returns {string} Valor formateado (ej: \"12,50‚Ç¨\")\n */\nexport function formatCurrency(value) {\n    const num = parseFloat(value) || 0;\n    return num.toFixed(2).replace('.', ',') + '‚Ç¨';\n}\n\n/**\n * Formatea fecha a formato espa√±ol\n * @param {string|Date} date - Fecha a formatear\n * @returns {string} Fecha formateada (ej: \"21/12/2025\")\n */\nexport function formatDate(date) {\n    if (!date) return '-';\n    const d = new Date(date);\n    return d.toLocaleDateString('es-ES');\n}\n\n/**\n * Formatea fecha y hora a formato espa√±ol\n * @param {string|Date} date - Fecha a formatear\n * @returns {string} Fecha y hora formateada\n */\nexport function formatDateTime(date) {\n    if (!date) return '-';\n    const d = new Date(date);\n    return d.toLocaleString('es-ES');\n}\n\n/**\n * Debounce - Retrasa ejecuci√≥n hasta que pare de llamarse\n * @param {Function} func - Funci√≥n a ejecutar\n * @param {number} wait - Milisegundos de espera\n * @returns {Function} Funci√≥n con debounce\n */\nexport function debounce(func, wait = 300) {\n    let timeout;\n    return function executedFunction(...args) {\n        const later = () => {\n            clearTimeout(timeout);\n            func(...args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n\n// Exponer al scope global para compatibilidad\nif (typeof window !== 'undefined') {\n    window.showToast = showToast;\n    window.showLoading = showLoading;\n    window.hideLoading = hideLoading;\n    window.exportarAExcel = exportarAExcel;\n    window.formatCurrency = formatCurrency;\n    window.formatDate = formatDate;\n    window.formatDateTime = formatDateTime;\n    window.debounce = debounce;\n}\n","/**\n * M√≥dulo de Ingredientes - UI\n * Funciones de renderizado e interfaz de usuario\n */\n\nimport { showToast } from '../../ui/toast.js';\nimport { getElement, setElementHTML, hideElement, showElement } from '../../utils/dom-helpers.js';\n\n// Variable local para ingrediente siendo editado\nlet editandoIngredienteId = null;\n\n/**\n * Renderiza la lista de ingredientes en la tabla\n */\nexport function renderizarIngredientes() {\n    const busqueda = getElement('busqueda-ingredientes')?.value?.toLowerCase() || '';\n    const ingredientes = window.ingredientes || [];\n    const proveedores = window.proveedores || [];\n\n    const filtrados = ingredientes.filter(ing => {\n        const nombreProv = getNombreProveedor(ing.proveedor_id, proveedores).toLowerCase();\n        return ing.nombre.toLowerCase().includes(busqueda) || nombreProv.includes(busqueda);\n    });\n\n    const container = getElement('tabla-ingredientes');\n    if (!container) return;\n\n    if (filtrados.length === 0) {\n        container.innerHTML = `\n      <div class=\"empty-state\">\n        <div class=\"icon\">üì¶</div>\n        <h3>${busqueda ? 'No encontrados' : 'A√∫n no hay ingredientes'}</h3>\n        <p>${busqueda ? 'Prueba otra b√∫squeda' : 'A√±ade tu primer ingrediente'}</p>\n      </div>\n    `;\n        const resumen = getElement('resumen-ingredientes');\n        if (resumen) resumen.style.display = 'none';\n    } else {\n        let html = '<table><thead><tr>';\n        html += '<th>Ingrediente</th><th>Proveedor</th><th>Precio</th><th>Stock</th><th>Stock M√≠nimo</th>';\n        html += '</tr></thead><tbody>';\n\n        filtrados.forEach(ing => {\n            const stockActual = parseFloat(ing.stock_actual) || 0;\n            const stockMinimo = parseFloat(ing.stock_minimo) || 0;\n            const stockBajo = stockMinimo > 0 && stockActual <= stockMinimo;\n\n            html += '<tr>';\n            html += `<td><strong style=\"cursor: pointer;\" onclick=\"window.editarIngrediente(${ing.id})\">${ing.nombre}</strong></td>`;\n            html += `<td>${getNombreProveedor(ing.proveedor_id, proveedores)}</td>`;\n            html += `<td>${ing.precio ? parseFloat(ing.precio).toFixed(2) + ' ‚Ç¨/' + ing.unidad : '-'}</td>`;\n            html += `<td>`;\n            if (ing.stock_actual) {\n                html += `<span class=\"stock-badge ${stockBajo ? 'stock-low' : 'stock-ok'}\">${ing.stock_actual} ${ing.unidad}</span>`;\n                if (stockBajo && ing.stock_minimo) html += ` ‚ö†Ô∏è`;\n            } else {\n                html += '-';\n            }\n            html += `</td>`;\n            html += `<td>${ing.stock_minimo ? parseFloat(ing.stock_minimo) + ' ' + ing.unidad : '-'}</td>`;\n            html += '</tr>';\n        });\n\n        html += '</tbody></table>';\n        container.innerHTML = html;\n\n        const resumen = getElement('resumen-ingredientes');\n        if (resumen) {\n            resumen.innerHTML = `\n        <div>Total: <strong>${ingredientes.length}</strong></div>\n        <div>Mostrando: <strong>${filtrados.length}</strong></div>\n      `;\n            resumen.style.display = 'flex';\n        }\n    }\n}\n\n/**\n * Muestra el formulario para a√±adir ingrediente\n */\nexport function mostrarFormularioIngrediente() {\n    actualizarSelectProveedores();\n    const form = getElement('formulario-ingrediente');\n    if (form) {\n        form.style.display = 'block';\n        const input = getElement('ing-nombre');\n        if (input) input.focus();\n    }\n}\n\n/**\n * Cierra el formulario de ingrediente\n */\nexport function cerrarFormularioIngrediente() {\n    const form = getElement('formulario-ingrediente');\n    if (form) {\n        form.style.display = 'none';\n        const formElement = form.querySelector('form');\n        if (formElement) formElement.reset();\n    }\n\n    editandoIngredienteId = null;\n\n    const title = getElement('form-title-ingrediente');\n    if (title) title.textContent = 'Nuevo Ingrediente';\n\n    const btn = getElement('btn-text-ingrediente');\n    if (btn) btn.textContent = 'A√±adir';\n}\n\n/**\n * Actualiza el select de proveedores\n */\nfunction actualizarSelectProveedores() {\n    const select = getElement('ing-proveedor-select');\n    if (!select) return;\n\n    const proveedores = window.proveedores || [];\n    select.innerHTML = '<option value=\"\">Sin proveedor</option>';\n    proveedores.forEach(prov => {\n        select.innerHTML += `<option value=\"${prov.id}\">${prov.nombre}</option>`;\n    });\n}\n\n/**\n * Helper: Obtiene nombre del proveedor por ID\n */\nfunction getNombreProveedor(proveedorId, proveedores = null) {\n    const provs = proveedores || window.proveedores || [];\n    const prov = provs.find(p => p.id === proveedorId);\n    return prov ? prov.nombre : 'Sin proveedor';\n}\n\n/**\n * Exporta ingredientes a Excel\n */\nexport function exportarIngredientes() {\n    if (typeof window.exportarAExcel !== 'function') {\n        showToast('Exportaci√≥n no disponible', 'error');\n        return;\n    }\n\n    const columnas = [\n        { header: 'Nombre', key: 'nombre' },\n        { header: 'Categor√≠a', key: 'categoria' },\n        {\n            header: 'Proveedor', value: (ing) => {\n                const prov = (window.proveedores || []).find(p => p.id === ing.proveedor_id);\n                return prov ? prov.nombre : 'Sin proveedor';\n            }\n        },\n        { header: 'Precio (‚Ç¨)', value: (ing) => parseFloat(ing.precio || 0).toFixed(2) },\n        { header: 'Unidad', key: 'unidad' },\n        { header: 'Stock Actual', value: (ing) => parseFloat(ing.stock_actual || 0).toFixed(2) },\n        { header: 'Stock M√≠nimo', value: (ing) => parseFloat(ing.stock_minimo || 0).toFixed(2) }\n    ];\n\n    window.exportarAExcel(window.ingredientes || [], 'Ingredientes_CostOS', columnas);\n}\n\n// Exponer funci√≥n para compatibilidad\nexport function getEditandoIngredienteId() {\n    return editandoIngredienteId;\n}\n\nexport function setEditandoIngredienteId(id) {\n    editandoIngredienteId = id;\n}\n","/**\n * M√≥dulo de Ingredientes - CRUD\n * Operaciones de crear, editar y eliminar ingredientes\n */\n\nimport { showToast } from '../../ui/toast.js';\nimport { getElement, getInputValue } from '../../utils/dom-helpers.js';\nimport { setEditandoIngredienteId } from './ingredientes-ui.js';\n\n/**\n * Guarda un ingrediente (crear o actualizar)\n */\nexport async function guardarIngrediente(event) {\n    event.preventDefault();\n\n    const ingrediente = {\n        nombre: getInputValue('ing-nombre'),\n        proveedorId: getInputValue('ing-proveedor-select') || null,\n        precio: parseFloat(getInputValue('ing-precio')) || 0,\n        unidad: getInputValue('ing-unidad'),\n        stockActual: parseFloat(getInputValue('ing-stockActual')) || 0,\n        stockMinimo: parseFloat(getInputValue('ing-stockMinimo')) || 0\n    };\n\n    // Validaciones\n    if (!ingrediente.nombre || ingrediente.nombre.trim() === '') {\n        showToast('El nombre es obligatorio', 'error');\n        return;\n    }\n    if (ingrediente.precio < 0) {\n        showToast('El precio no puede ser negativo', 'error');\n        return;\n    }\n    if (ingrediente.stockActual < 0) {\n        showToast('El stock no puede ser negativo', 'error');\n        return;\n    }\n    if (ingrediente.stockMinimo < 0) {\n        showToast('El stock m√≠nimo no puede ser negativo', 'error');\n        return;\n    }\n\n    if (typeof window.showLoading === 'function') window.showLoading();\n\n    try {\n        const editandoId = window.editandoIngredienteId;\n        let ingredienteId;\n\n        if (editandoId !== null) {\n            await window.api.updateIngrediente(editandoId, ingrediente);\n            ingredienteId = editandoId;\n        } else {\n            const nuevoIng = await window.api.createIngrediente(ingrediente);\n            ingredienteId = nuevoIng.id;\n        }\n\n        // Si se seleccion√≥ un proveedor, a√±adir ingrediente a su lista\n        if (ingrediente.proveedorId) {\n            const proveedores = window.proveedores || [];\n            const proveedor = proveedores.find(p => p.id === parseInt(ingrediente.proveedorId));\n            if (proveedor) {\n                const ingredientesDelProveedor = proveedor.ingredientes || [];\n                if (!ingredientesDelProveedor.includes(ingredienteId)) {\n                    ingredientesDelProveedor.push(ingredienteId);\n                    await window.api.updateProveedor(proveedor.id, {\n                        ...proveedor,\n                        ingredientes: ingredientesDelProveedor\n                    });\n                }\n            }\n        }\n\n        await window.cargarDatos();\n        window.renderizarIngredientes();\n        if (typeof window.renderizarInventario === 'function') window.renderizarInventario();\n        if (typeof window.actualizarKPIs === 'function') window.actualizarKPIs();\n        if (typeof window.actualizarDashboardExpandido === 'function') window.actualizarDashboardExpandido();\n\n        if (typeof window.hideLoading === 'function') window.hideLoading();\n        showToast(editandoId ? 'Ingrediente actualizado' : 'Ingrediente creado', 'success');\n        window.cerrarFormularioIngrediente();\n    } catch (error) {\n        if (typeof window.hideLoading === 'function') window.hideLoading();\n        console.error('Error:', error);\n        showToast('Error guardando ingrediente: ' + error.message, 'error');\n    }\n}\n\n/**\n * Edita un ingrediente cargando sus datos en el formulario\n */\nexport function editarIngrediente(id) {\n    const ingredientes = window.ingredientes || [];\n    const ing = ingredientes.find(i => i.id === id);\n    if (!ing) return;\n\n    // Actualizar select de proveedores (funci√≥n de UI)\n    if (typeof window.actualizarSelectProveedores === 'function') {\n        window.actualizarSelectProveedores();\n    }\n\n    const nombreEl = getElement('ing-nombre');\n    if (nombreEl) nombreEl.value = ing.nombre;\n\n    const provEl = getElement('ing-proveedor-select');\n    if (provEl) provEl.value = ing.proveedorId || '';\n\n    const precioEl = getElement('ing-precio');\n    if (precioEl) precioEl.value = ing.precio || '';\n\n    const unidadEl = getElement('ing-unidad');\n    if (unidadEl) unidadEl.value = ing.unidad;\n\n    const stockEl = getElement('ing-stockActual');\n    if (stockEl) stockEl.value = ing.stockActual || '';\n\n    const minEl = getElement('ing-stockMinimo');\n    if (minEl) minEl.value = ing.stockMinimo || '';\n\n    // Actualizar estado de edici√≥n\n    window.editandoIngredienteId = id;\n    setEditandoIngredienteId(id);\n\n    const titleEl = getElement('form-title-ingrediente');\n    if (titleEl) titleEl.textContent = 'Editar Ingrediente';\n\n    const btnEl = getElement('btn-text-ingrediente');\n    if (btnEl) btnEl.textContent = 'Guardar';\n\n    window.mostrarFormularioIngrediente();\n}\n\n/**\n * Elimina un ingrediente\n */\nexport async function eliminarIngrediente(id) {\n    if (!confirm('¬øEliminar este ingrediente?')) return;\n\n    if (typeof window.showLoading === 'function') window.showLoading();\n\n    try {\n        await window.api.deleteIngrediente(id);\n        await window.cargarDatos();\n        window.renderizarIngredientes();\n        if (typeof window.renderizarInventario === 'function') window.renderizarInventario();\n        if (typeof window.actualizarKPIs === 'function') window.actualizarKPIs();\n        if (typeof window.actualizarDashboardExpandido === 'function') window.actualizarDashboardExpandido();\n\n        if (typeof window.hideLoading === 'function') window.hideLoading();\n        showToast('Ingrediente eliminado', 'success');\n    } catch (error) {\n        if (typeof window.hideLoading === 'function') window.hideLoading();\n        console.error('Error:', error);\n        showToast('Error eliminando ingrediente: ' + error.message, 'error');\n    }\n}\n","/**\n * Recetas UI Module\n * Funciones de interfaz de usuario para recetas\n */\n\n/**\n * Muestra el formulario de nueva receta\n */\nexport function mostrarFormularioReceta() {\n    if (window.ingredientes.length === 0) {\n        window.showToast('Primero a√±ade ingredientes', 'warning');\n        window.cambiarTab('ingredientes');\n        window.mostrarFormularioIngrediente();\n        return;\n    }\n    document.getElementById('formulario-receta').style.display = 'block';\n    window.agregarIngredienteReceta();\n    document.getElementById('rec-nombre').focus();\n}\n\n/**\n * Cierra el formulario de receta y resetea campos\n */\nexport function cerrarFormularioReceta() {\n    document.getElementById('formulario-receta').style.display = 'none';\n    document.querySelector('#formulario-receta form').reset();\n    document.getElementById('lista-ingredientes-receta').innerHTML = '';\n    document.getElementById('coste-calculado-form').style.display = 'none';\n    window.editandoRecetaId = null;\n\n    // Limpiar campos del formulario\n    document.getElementById('rec-nombre').value = '';\n    document.getElementById('rec-codigo').value = '';\n    document.getElementById('rec-categoria').value = 'entrante';\n    document.getElementById('rec-precio_venta').value = '';\n    document.getElementById('rec-porciones').value = '1';\n    document.getElementById('lista-ingredientes-receta').innerHTML = '';\n    document.getElementById('form-title-receta').textContent = 'Nueva Receta';\n    document.getElementById('btn-text-receta').textContent = 'Guardar';\n}\n\n/**\n * Agrega una fila de ingrediente en el formulario de receta\n */\nexport function agregarIngredienteReceta() {\n    const lista = document.getElementById('lista-ingredientes-receta');\n    const item = document.createElement('div');\n    item.className = 'ingrediente-item';\n    item.style.cssText = 'display: flex; gap: 10px; align-items: center; margin-bottom: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px;';\n\n    let optionsHtml = '<option value=\"\">Selecciona ingrediente...</option>';\n    window.ingredientes.forEach(ing => {\n        optionsHtml += `<option value=\"${ing.id}\">${ing.nombre} (${parseFloat(ing.precio || 0).toFixed(2)}‚Ç¨/${ing.unidad})</option>`;\n    });\n\n    item.innerHTML = `\n    <select style=\"flex: 2; padding: 8px; border: 1px solid #ddd; border-radius: 6px;\" onchange=\"window.calcularCosteReceta()\">\n      ${optionsHtml}\n    </select>\n    <input type=\"number\" step=\"0.01\" min=\"0\" placeholder=\"Cantidad\" style=\"flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px;\" onchange=\"window.calcularCosteReceta()\">\n    <button type=\"button\" onclick=\"this.parentElement.remove(); window.calcularCosteReceta();\" style=\"background: #ef4444; color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer;\">‚úï</button>\n  `;\n\n    lista.appendChild(item);\n}\n\n/**\n * Calcula el coste total de la receta desde ingredientes seleccionados\n */\nexport function calcularCosteReceta() {\n    const items = document.querySelectorAll('#lista-ingredientes-receta .ingrediente-item');\n    let costeTotal = 0;\n\n    items.forEach(item => {\n        const select = item.querySelector('select');\n        const input = item.querySelector('input');\n        if (select.value && input.value) {\n            const ing = window.ingredientes.find(i => i.id === parseInt(select.value));\n            if (ing) {\n                costeTotal += parseFloat(ing.precio || 0) * parseFloat(input.value || 0);\n            }\n        }\n    });\n\n    const costeDiv = document.getElementById('coste-calculado-form');\n    if (costeDiv) {\n        costeDiv.style.display = costeTotal > 0 ? 'block' : 'none';\n        const costeSpan = document.getElementById('coste-receta-valor');\n        if (costeSpan) costeSpan.textContent = costeTotal.toFixed(2) + '‚Ç¨';\n\n        const precioVenta = parseFloat(document.getElementById('rec-precio_venta')?.value || 0);\n        const margenSpan = document.getElementById('margen-receta-valor');\n        if (margenSpan && precioVenta > 0) {\n            const margen = ((precioVenta - costeTotal) / precioVenta * 100);\n            margenSpan.textContent = margen.toFixed(1) + '%';\n            margenSpan.style.color = margen >= 60 ? '#10b981' : margen >= 40 ? '#f59e0b' : '#ef4444';\n        }\n    }\n\n    return costeTotal;\n}\n\n/**\n * Renderiza la tabla de recetas\n */\nexport function renderizarRecetas() {\n    const busqueda = document.getElementById('busqueda-recetas').value.toLowerCase();\n    const filtradas = window.recetas.filter(r =>\n        r.nombre.toLowerCase().includes(busqueda) ||\n        (r.codigo && r.codigo.toString().includes(busqueda))\n    );\n\n    const container = document.getElementById('tabla-recetas');\n\n    if (filtradas.length === 0) {\n        container.innerHTML = `\n      <div class=\"empty-state\">\n        <div class=\"icon\">üë®‚Äçüç≥</div>\n        <h3>${busqueda ? 'No encontradas' : 'A√∫n no hay recetas'}</h3>\n      </div>\n    `;\n        document.getElementById('resumen-recetas').style.display = 'none';\n    } else {\n        let html = '<table><thead><tr>';\n        html += '<th>C√≥d.</th><th>Plato</th><th>Categor√≠a</th><th>Coste</th><th>Precio</th><th>Margen</th><th>Acciones</th>';\n        html += '</tr></thead><tbody>';\n\n        filtradas.forEach(rec => {\n            const coste = window.calcularCosteRecetaCompleto(rec);\n            const margen = rec.precio_venta - coste;\n            const pct = rec.precio_venta > 0 ? ((margen / rec.precio_venta) * 100).toFixed(0) : 0;\n\n            html += '<tr>';\n            html += `<td><span style=\"color:#666;font-size:12px;\">${rec.codigo || '-'}</span></td>`;\n            html += `<td><strong>${rec.nombre}</strong></td>`;\n            html += `<td><span class=\"badge badge-success\">${rec.categoria}</span></td>`;\n            html += `<td>${coste.toFixed(2)} ‚Ç¨</td>`;\n            html += `<td>${rec.precio_venta ? parseFloat(rec.precio_venta).toFixed(2) : '0.00'} ‚Ç¨</td>`;\n            html += `<td><span class=\"badge ${margen > 0 ? 'badge-success' : 'badge-warning'}\">${margen.toFixed(2)} ‚Ç¨ (${pct}%)</span></td>`;\n            html += `<td><div class=\"actions\">`;\n            html += `<button class=\"icon-btn produce\" onclick=\"window.abrirModalProducir(${rec.id})\">‚¨áÔ∏è</button>`;\n            html += `<button class=\"icon-btn edit\" onclick=\"window.editarReceta(${rec.id})\">‚úèÔ∏è</button>`;\n            html += `<button class=\"icon-btn delete\" onclick=\"window.eliminarReceta(${rec.id})\">üóëÔ∏è</button>`;\n            html += '</div></td>';\n\n            html += '</tr>';\n        });\n\n        html += '</tbody></table>';\n        container.innerHTML = html;\n\n        document.getElementById('resumen-recetas').innerHTML = `\n      <div>Total: <strong>${window.recetas.length}</strong></div>\n      <div>Mostrando: <strong>${filtradas.length}</strong></div>\n    `;\n        document.getElementById('resumen-recetas').style.display = 'flex';\n    }\n}\n\n/**\n * Exporta recetas a Excel\n */\nexport function exportarRecetas() {\n    const columnas = [\n        { header: 'ID', key: 'id' },\n        { header: 'C√≥digo', value: (rec) => rec.codigo || `REC-${String(rec.id).padStart(4, '0')}` },\n        { header: 'Nombre', key: 'nombre' },\n        { header: 'Categor√≠a', key: 'categoria' },\n        { header: 'Precio Venta (‚Ç¨)', value: (rec) => parseFloat(rec.precio_venta || 0).toFixed(2) },\n        {\n            header: 'Coste (‚Ç¨)', value: (rec) => {\n                return (rec.ingredientes || []).reduce((sum, item) => {\n                    const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n                    return sum + (ing ? parseFloat(ing.precio) * parseFloat(item.cantidad) : 0);\n                }, 0).toFixed(2);\n            }\n        },\n        {\n            header: 'Margen (‚Ç¨)', value: (rec) => {\n                const coste = (rec.ingredientes || []).reduce((sum, item) => {\n                    const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n                    return sum + (ing ? parseFloat(ing.precio) * parseFloat(item.cantidad) : 0);\n                }, 0);\n                return (parseFloat(rec.precio_venta || 0) - coste).toFixed(2);\n            }\n        },\n        {\n            header: 'Margen (%)', value: (rec) => {\n                const coste = (rec.ingredientes || []).reduce((sum, item) => {\n                    const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n                    return sum + (ing ? parseFloat(ing.precio) * parseFloat(item.cantidad) : 0);\n                }, 0);\n                const margen = rec.precio_venta > 0 ? ((parseFloat(rec.precio_venta) - coste) / parseFloat(rec.precio_venta) * 100) : 0;\n                return margen.toFixed(1) + '%';\n            }\n        },\n        { header: 'Porciones', key: 'porciones' },\n        { header: 'N¬∫ Ingredientes', value: (rec) => (rec.ingredientes || []).length }\n    ];\n\n    window.exportarAExcel(window.recetas, 'Recetas_LaCaleta', columnas);\n}\n","/**\n * Recetas CRUD Module\n * Funciones de creaci√≥n, edici√≥n y eliminaci√≥n de recetas\n */\n\n/**\n * Guarda una receta (nueva o editada)\n * @param {Event} event - Evento del formulario\n */\nexport async function guardarReceta(event) {\n    event.preventDefault();\n\n    const items = document.querySelectorAll('#lista-ingredientes-receta .ingrediente-item');\n    const ingredientesReceta = [];\n\n    items.forEach(item => {\n        const select = item.querySelector('select');\n        const input = item.querySelector('input');\n        if (select.value && input.value) {\n            ingredientesReceta.push({\n                ingredienteId: parseInt(select.value),\n                cantidad: parseFloat(input.value)\n            });\n        }\n    });\n\n    if (ingredientesReceta.length === 0) {\n        window.showToast('A√±ade ingredientes a la receta', 'warning');\n        return;\n    }\n\n    const receta = {\n        nombre: document.getElementById('rec-nombre').value,\n        codigo: document.getElementById('rec-codigo').value,\n        categoria: document.getElementById('rec-categoria').value,\n        precio_venta: parseFloat(document.getElementById('rec-precio_venta').value) || 0,\n        porciones: parseInt(document.getElementById('rec-porciones').value) || 1,\n        ingredientes: ingredientesReceta\n    };\n\n    window.showLoading();\n\n    try {\n        if (window.editandoRecetaId !== null) {\n            await window.api.updateReceta(window.editandoRecetaId, receta);\n        } else {\n            await window.api.createReceta(receta);\n        }\n        await window.cargarDatos();\n        window.renderizarRecetas();\n        window.hideLoading();\n        window.showToast(window.editandoRecetaId ? 'Receta actualizada' : 'Receta creada', 'success');\n        window.cerrarFormularioReceta();\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error guardando receta: ' + error.message, 'error');\n    }\n}\n\n/**\n * Edita una receta existente\n * @param {number} id - ID de la receta\n */\nexport function editarReceta(id) {\n    const rec = window.recetas.find(r => r.id === id);\n    if (!rec) return;\n\n    document.getElementById('rec-nombre').value = rec.nombre;\n    document.getElementById('rec-codigo').value = rec.codigo || '';\n    document.getElementById('rec-categoria').value = rec.categoria;\n    document.getElementById('rec-precio_venta').value = rec.precio_venta;\n    document.getElementById('rec-porciones').value = rec.porciones;\n\n    document.getElementById('lista-ingredientes-receta').innerHTML = '';\n    rec.ingredientes.forEach(item => {\n        window.agregarIngredienteReceta();\n        const lastItem = document.querySelector('#lista-ingredientes-receta .ingrediente-item:last-child');\n        lastItem.querySelector('select').value = item.ingredienteId;\n        lastItem.querySelector('input').value = item.cantidad;\n    });\n\n    window.calcularCosteReceta();\n    window.editandoRecetaId = id;\n    document.getElementById('form-title-receta').textContent = 'Editar';\n    document.getElementById('btn-text-receta').textContent = 'Guardar';\n    window.mostrarFormularioReceta();\n}\n\n/**\n * Elimina una receta\n * @param {number} id - ID de la receta\n */\nexport async function eliminarReceta(id) {\n    const rec = window.recetas.find(r => r.id === id);\n    if (!rec) return;\n\n    if (!confirm(`¬øEliminar la receta \"${rec.nombre}\"?`)) return;\n\n    window.showLoading();\n\n    try {\n        await window.api.deleteReceta(id);\n        await window.cargarDatos();\n        window.renderizarRecetas();\n        window.hideLoading();\n        window.showToast('Receta eliminada', 'success');\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error eliminando receta: ' + error.message, 'error');\n    }\n}\n\n/**\n * Calcula el coste completo de una receta\n * @param {Object} receta - Objeto receta\n * @returns {number} Coste total\n */\nexport function calcularCosteRecetaCompleto(receta) {\n    if (!receta || !receta.ingredientes) return 0;\n    return receta.ingredientes.reduce((total, item) => {\n        const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n        const precio = ing ? parseFloat(ing.precio) : 0;\n        return total + (precio * item.cantidad);\n    }, 0);\n}\n\n/**\n * Abre modal para producir platos\n * @param {number} id - ID de la receta\n */\nexport function abrirModalProducir(id) {\n    window.recetaProduciendo = id;\n    const rec = window.recetas.find(r => r.id === id);\n    document.getElementById('modal-plato-nombre').textContent = rec.nombre;\n    document.getElementById('modal-cantidad').value = 1;\n    window.actualizarDetalleDescuento();\n    document.getElementById('modal-producir').classList.add('active');\n}\n\n/**\n * Cierra modal de producir\n */\nexport function cerrarModalProducir() {\n    document.getElementById('modal-producir').classList.remove('active');\n    window.recetaProduciendo = null;\n}\n\n/**\n * Actualiza detalle de descuento de stock\n */\nexport function actualizarDetalleDescuento() {\n    if (window.recetaProduciendo === null) return;\n    const cant = parseInt(document.getElementById('modal-cantidad').value) || 1;\n    const rec = window.recetas.find(r => r.id === window.recetaProduciendo);\n    let html = '<ul style=\"margin:0;padding-left:20px;\">';\n    rec.ingredientes.forEach(item => {\n        const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n        if (ing) html += `<li>${ing.nombre}: -${item.cantidad * cant} ${ing.unidad}</li>`;\n    });\n    html += '</ul>';\n    document.getElementById('modal-descuento-detalle').innerHTML = html;\n}\n\n/**\n * Confirma y ejecuta la producci√≥n de platos (descuenta stock)\n */\nexport async function confirmarProduccion() {\n    if (window.recetaProduciendo === null) return;\n    const cant = parseInt(document.getElementById('modal-cantidad').value) || 1;\n    const rec = window.recetas.find(r => r.id === window.recetaProduciendo);\n\n    let falta = false;\n    let msg = 'Stock insuficiente:\\n';\n    rec.ingredientes.forEach(item => {\n        const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n        if (ing) {\n            const necesario = item.cantidad * cant;\n            if (ing.stockActual < necesario) {\n                falta = true;\n                msg += `- ${ing.nombre}: necesitas ${necesario}, tienes ${ing.stockActual}\\n`;\n            }\n        }\n    });\n\n    if (falta) {\n        alert(msg);\n        return;\n    }\n\n    window.showLoading();\n\n    try {\n        for (const item of rec.ingredientes) {\n            const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n            if (ing) {\n                const nuevoStock = Math.max(0, ing.stockActual - (item.cantidad * cant));\n                await window.api.updateIngrediente(ing.id, {\n                    ...ing,\n                    stockActual: nuevoStock\n                });\n            }\n        }\n\n        await window.cargarDatos();\n        window.renderizarIngredientes();\n        window.hideLoading();\n        cerrarModalProducir();\n        window.showToast(`Producidas ${cant} unidades de ${rec.nombre}`, 'success');\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error actualizando stock: ' + error.message, 'error');\n    }\n}\n","/**\n * Proveedores UI Module\n * Funciones de interfaz de usuario para proveedores\n */\n\n/**\n * Muestra el formulario de nuevo proveedor\n */\nexport function mostrarFormularioProveedor() {\n    document.getElementById('formulario-proveedor').style.display = 'block';\n    cargarIngredientesProveedor();\n    document.getElementById('prov-nombre').focus();\n}\n\n/**\n * Cierra el formulario de proveedor\n */\nexport function cerrarFormularioProveedor() {\n    document.getElementById('formulario-proveedor').style.display = 'none';\n    document.querySelector('#formulario-proveedor form').reset();\n    window.editandoProveedorId = null;\n    document.getElementById('form-title-proveedor').textContent = 'Nuevo Proveedor';\n    document.getElementById('btn-text-proveedor').textContent = 'A√±adir';\n}\n\n/**\n * Carga lista de ingredientes con checkboxes\n */\nexport function cargarIngredientesProveedor(seleccionados = []) {\n    const container = document.getElementById('lista-ingredientes-proveedor');\n    if (window.ingredientes.length === 0) {\n        container.innerHTML = '<p style=\"color:#999;text-align:center;padding:20px;\">Primero a√±ade ingredientes</p>';\n        return;\n    }\n\n    let html = '<div class=\"search-box-small\"><input type=\"text\" id=\"buscar-ing-prov\" placeholder=\"Buscar ingrediente...\" oninput=\"window.filtrarIngredientesProveedor()\"></div>';\n    html += '<div id=\"lista-ing-checks\">';\n\n    window.ingredientes.forEach(ing => {\n        const checked = seleccionados.includes(ing.id) ? 'checked' : '';\n        html += `\n      <div class=\"ing-check-item\">\n        <input type=\"checkbox\" id=\"prov-ing-${ing.id}\" value=\"${ing.id}\" ${checked}>\n        <label for=\"prov-ing-${ing.id}\">${ing.nombre}</label>\n      </div>\n    `;\n    });\n\n    html += '</div>';\n    container.innerHTML = html;\n}\n\n/**\n * Filtra ingredientes en el formulario de proveedor\n */\nexport function filtrarIngredientesProveedor() {\n    const busqueda = document.getElementById('buscar-ing-prov')?.value.toLowerCase() || '';\n    const items = document.querySelectorAll('.ing-check-item');\n\n    items.forEach(item => {\n        const label = item.querySelector('label').textContent.toLowerCase();\n        item.style.display = label.includes(busqueda) ? 'flex' : 'none';\n    });\n}\n\n/**\n * Renderiza la tabla de proveedores\n */\nexport function renderizarProveedores() {\n    const busqueda = document.getElementById('busqueda-proveedores')?.value.toLowerCase() || '';\n    const filtrados = window.proveedores.filter(p =>\n        p.nombre.toLowerCase().includes(busqueda) ||\n        (p.telefono && p.telefono.includes(busqueda)) ||\n        (p.email && p.email.toLowerCase().includes(busqueda))\n    );\n\n    const container = document.getElementById('tabla-proveedores');\n\n    if (filtrados.length === 0) {\n        container.innerHTML = `\n      <div class=\"empty-state\">\n        <div class=\"icon\">üöö</div>\n        <h3>${busqueda ? 'No encontrados' : 'A√∫n no hay proveedores'}</h3>\n      </div>\n    `;\n        return;\n    }\n\n    let html = '<table><thead><tr>';\n    html += '<th>Nombre</th><th>Contacto</th><th>Ingredientes</th><th>Acciones</th>';\n    html += '</tr></thead><tbody>';\n\n    filtrados.forEach(prov => {\n        const ingredientesCount = prov.ingredientes?.length || 0;\n\n        html += '<tr>';\n        html += `<td><strong>${prov.nombre}</strong></td>`;\n        html += `<td>`;\n        if (prov.telefono) html += `üìû ${prov.telefono}<br>`;\n        if (prov.email) html += `‚úâÔ∏è ${prov.email}`;\n        html += `</td>`;\n        html += `<td>${ingredientesCount} items</td>`;\n        html += `<td><div class=\"actions\">`;\n        html += `<button class=\"icon-btn view\" onclick=\"window.verProveedorDetalles(${prov.id})\">üëÅÔ∏è</button>`;\n        html += `<button class=\"icon-btn edit\" onclick=\"window.editarProveedor(${prov.id})\">‚úèÔ∏è</button>`;\n        html += `<button class=\"icon-btn delete\" onclick=\"window.eliminarProveedor(${prov.id})\">üóëÔ∏è</button>`;\n        html += '</div></td>';\n        html += '</tr>';\n    });\n\n    html += '</tbody></table>';\n    container.innerHTML = html;\n}\n\n/**\n * Muestra detalles de un proveedor en modal\n */\nexport function verProveedorDetalles(id) {\n    const prov = window.proveedores.find(p => p.id === id);\n    if (!prov) return;\n\n    document.getElementById('modal-prov-nombre').textContent = prov.nombre;\n\n    let info = '';\n    if (prov.telefono) info += `<p>üìû ${prov.telefono}</p>`;\n    if (prov.email) info += `<p>‚úâÔ∏è ${prov.email}</p>`;\n    if (prov.direccion) info += `<p>üìç ${prov.direccion}</p>`;\n    document.getElementById('modal-prov-info').innerHTML = info;\n\n    let ingHtml = '<ul>';\n    if (prov.ingredientes && prov.ingredientes.length > 0) {\n        prov.ingredientes.forEach(ingId => {\n            const ing = window.ingredientes.find(i => i.id === ingId);\n            if (ing) ingHtml += `<li>${ing.nombre}</li>`;\n        });\n    } else {\n        ingHtml += '<li style=\"color:#999;\">Sin ingredientes asignados</li>';\n    }\n    ingHtml += '</ul>';\n    document.getElementById('modal-prov-ingredientes').innerHTML = ingHtml;\n\n    document.getElementById('modal-ver-proveedor').classList.add('active');\n}\n\n/**\n * Cierra modal de ver proveedor\n */\nexport function cerrarModalVerProveedor() {\n    document.getElementById('modal-ver-proveedor').classList.remove('active');\n}\n","/**\n * Proveedores CRUD Module\n * Funciones de crear, editar y eliminar proveedores\n */\n\n/**\n * Guarda un proveedor (nuevo o editado)\n */\nexport async function guardarProveedor(event) {\n    event.preventDefault();\n\n    const checks = document.querySelectorAll('#lista-ingredientes-proveedor input[type=\"checkbox\"]:checked');\n    const ingredientesIds = Array.from(checks).map(cb => parseInt(cb.value));\n\n    const proveedor = {\n        nombre: document.getElementById('prov-nombre').value,\n        telefono: document.getElementById('prov-telefono').value || '',\n        email: document.getElementById('prov-email').value || '',\n        direccion: document.getElementById('prov-direccion').value || '',\n        ingredientes: ingredientesIds\n    };\n\n    window.showLoading();\n\n    try {\n        if (window.editandoProveedorId !== null) {\n            await window.api.updateProveedor(window.editandoProveedorId, proveedor);\n        } else {\n            await window.api.createProveedor(proveedor);\n        }\n\n        await window.cargarDatos();\n        window.renderizarProveedores();\n        window.hideLoading();\n        window.showToast(window.editandoProveedorId ? 'Proveedor actualizado' : 'Proveedor creado', 'success');\n        window.cerrarFormularioProveedor();\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error guardando proveedor: ' + error.message, 'error');\n    }\n}\n\n/**\n * Edita un proveedor existente\n */\nexport function editarProveedor(id) {\n    const prov = window.proveedores.find(p => p.id === id);\n    if (!prov) return;\n\n    document.getElementById('prov-nombre').value = prov.nombre;\n    document.getElementById('prov-telefono').value = prov.telefono || '';\n    document.getElementById('prov-email').value = prov.email || '';\n    document.getElementById('prov-direccion').value = prov.direccion || '';\n\n    window.cargarIngredientesProveedor(prov.ingredientes || []);\n\n    window.editandoProveedorId = id;\n    document.getElementById('form-title-proveedor').textContent = 'Editar Proveedor';\n    document.getElementById('btn-text-proveedor').textContent = 'Guardar';\n    window.mostrarFormularioProveedor();\n}\n\n/**\n * Elimina un proveedor\n */\nexport async function eliminarProveedor(id) {\n    const prov = window.proveedores.find(p => p.id === id);\n    if (!prov) return;\n\n    if (!confirm(`¬øEliminar proveedor \"${prov.nombre}\"?`)) return;\n\n    window.showLoading();\n\n    try {\n        await window.api.deleteProveedor(id);\n        await window.cargarDatos();\n        window.renderizarProveedores();\n        window.hideLoading();\n        window.showToast('Proveedor eliminado', 'success');\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error eliminando proveedor: ' + error.message, 'error');\n    }\n}\n","/**\n * Pedidos UI Module\n * Funciones de interfaz de usuario para pedidos\n */\n\n/**\n * Muestra el formulario de nuevo pedido\n */\nexport function mostrarFormularioPedido() {\n    if (window.proveedores.length === 0) {\n        window.showToast('Primero a√±ade proveedores', 'warning');\n        window.cambiarTab('proveedores');\n        return;\n    }\n    document.getElementById('formulario-pedido').style.display = 'block';\n    window.cargarIngredientesPedido();\n    document.getElementById('ped-proveedor').focus();\n}\n\n/**\n * Cierra el formulario de pedido\n */\nexport function cerrarFormularioPedido() {\n    document.getElementById('formulario-pedido').style.display = 'none';\n    document.querySelector('#formulario-pedido form').reset();\n    window.editandoPedidoId = null;\n}\n\n/**\n * Carga lista de ingredientes con checkboxes para pedido\n */\nexport function cargarIngredientesPedido() {\n    const container = document.getElementById('lista-ingredientes-pedido');\n    if (window.ingredientes.length === 0) {\n        container.innerHTML = '<p style=\"color:#999;text-align:center;padding:20px;\">Primero a√±ade ingredientes</p>';\n        return;\n    }\n\n    let html = '';\n    window.ingredientes.forEach(ing => {\n        html += `\n      <div class=\"ingrediente-check\">\n        <input type=\"checkbox\" id=\"ing-${ing.id}\" value=\"${ing.id}\" onchange=\"window.calcularTotalPedido()\">\n        <label for=\"ing-${ing.id}\">${ing.nombre} (${ing.precio}‚Ç¨/${ing.unidad})</label>\n        <input type=\"number\" step=\"0.01\" min=\"0\" placeholder=\"Cantidad\" disabled \n               data-ing-id=\"${ing.id}\" class=\"cantidad-pedido\" onchange=\"window.calcularTotalPedido()\">\n      </div>\n    `;\n    });\n    container.innerHTML = html;\n\n    // Enable cantidad input cuando se marca checkbox\n    container.querySelectorAll('input[type=\"checkbox\"]').forEach(cb => {\n        cb.addEventListener('change', (e) => {\n            const cantidadInput = container.querySelector(`input.cantidad-pedido[data-ing-id=\"${e.target.value}\"]`);\n            if (cantidadInput) {\n                cantidadInput.disabled = !e.target.checked;\n                if (!e.target.checked) cantidadInput.value = '';\n            }\n        });\n    });\n}\n\n/**\n * Agrega un ingrediente al pedido (alternativa simplificada)\n */\nexport function agregarIngredientePedido() {\n    // Versi√≥n simplificada - la UI principal usa cargarIngredientesPedido\n    window.calcularTotalPedido();\n}\n\n/**\n * Calcula el total del pedido\n */\nexport function calcularTotalPedido() {\n    const checks = document.querySelectorAll('#lista-ingredientes-pedido input[type=\"checkbox\"]:checked');\n    let total = 0;\n\n    checks.forEach(cb => {\n        const cantidadInput = document.querySelector(`input.cantidad-pedido[data-ing-id=\"${cb.value}\"]`);\n        if (cantidadInput && cantidadInput.value) {\n            const ing = window.ingredientes.find(i => i.id === parseInt(cb.value));\n            if (ing) {\n                total += parseFloat(ing.precio || 0) * parseFloat(cantidadInput.value || 0);\n            }\n        }\n    });\n\n    const totalDiv = document.getElementById('total-pedido');\n    if (totalDiv) {\n        totalDiv.textContent = total.toFixed(2) + '‚Ç¨';\n    }\n\n    return total;\n}\n\n/**\n * Renderiza la tabla de pedidos\n */\nexport function renderizarPedidos() {\n    const container = document.getElementById('tabla-pedidos');\n    const filtro = document.getElementById('filtro-estado-pedido')?.value || 'todos';\n\n    let pedidosFiltrados = window.pedidos;\n    if (filtro !== 'todos') {\n        pedidosFiltrados = window.pedidos.filter(p => p.estado === filtro);\n    }\n\n    if (pedidosFiltrados.length === 0) {\n        container.innerHTML = `\n      <div class=\"empty-state\">\n        <div class=\"icon\">üì¶</div>\n        <h3>No hay pedidos</h3>\n      </div>\n    `;\n        return;\n    }\n\n    let html = '<table><thead><tr>';\n    html += '<th>ID</th><th>Fecha</th><th>Proveedor</th><th>Items</th><th>Total</th><th>Estado</th><th>Acciones</th>';\n    html += '</tr></thead><tbody>';\n\n    pedidosFiltrados.forEach(ped => {\n        const prov = window.proveedores.find(p => p.id === ped.proveedorId);\n        const fecha = new Date(ped.fecha).toLocaleDateString('es-ES');\n\n        html += '<tr>';\n        html += `<td>#${ped.id}</td>`;\n        html += `<td>${fecha}</td>`;\n        html += `<td>${prov ? prov.nombre : 'Sin proveedor'}</td>`;\n        html += `<td>${ped.ingredientes?.length || 0}</td>`;\n        html += `<td>${parseFloat(ped.total || 0).toFixed(2)}‚Ç¨</td>`;\n\n        const estadoClass = ped.estado === 'recibido' ? 'badge-success' : 'badge-warning';\n        html += `<td><span class=\"badge ${estadoClass}\">${ped.estado}</span></td>`;\n\n        html += `<td><div class=\"actions\">`;\n        html += `<button type=\"button\" class=\"icon-btn view\" onclick=\"window.verDetallesPedido(${ped.id})\" title=\"Ver detalles\">üëÅÔ∏è</button>`;\n\n        if (ped.estado === 'pendiente') {\n            html += `<button type=\"button\" class=\"icon-btn success\" onclick=\"window.marcarPedidoRecibido(${ped.id})\" title=\"Recibir\">‚úÖ</button>`;\n        }\n\n        html += `<button type=\"button\" class=\"icon-btn delete\" onclick=\"window.eliminarPedido(${ped.id})\">üóëÔ∏è</button>`;\n        html += '</div></td>';\n        html += '</tr>';\n    });\n\n    html += '</tbody></table>';\n    container.innerHTML = html;\n}\n\n/**\n * Exporta pedidos a Excel\n */\nexport function exportarPedidos() {\n    const columnas = [\n        { header: 'ID', key: 'id' },\n        { header: 'Fecha Pedido', value: (p) => new Date(p.fecha).toLocaleDateString('es-ES') },\n        {\n            header: 'Proveedor', value: (p) => {\n                const prov = window.proveedores.find(pr => pr.id === p.proveedorId);\n                return prov ? prov.nombre : 'Sin proveedor';\n            }\n        },\n        { header: 'Estado', key: 'estado' },\n        { header: 'N¬∫ Ingredientes', value: (p) => (p.ingredientes || []).length },\n        { header: 'Total (‚Ç¨)', value: (p) => parseFloat(p.total || 0).toFixed(2) },\n        { header: 'Total Recibido (‚Ç¨)', value: (p) => parseFloat(p.total_recibido || 0).toFixed(2) },\n        { header: 'Fecha Recepci√≥n', value: (p) => p.fecha_recepcion ? new Date(p.fecha_recepcion).toLocaleDateString('es-ES') : '-' }\n    ];\n\n    window.exportarAExcel(window.pedidos, 'Pedidos_LaCaleta', columnas);\n}\n","/**\n * Pedidos CRUD Module\n * Funciones de crear, editar, eliminar y recibir pedidos\n */\n\n/**\n * Guarda un nuevo pedido\n * @param {Event} event - Evento del formulario\n */\nexport async function guardarPedido(event) {\n    event.preventDefault();\n\n    const checks = document.querySelectorAll('#lista-ingredientes-pedido input[type=\"checkbox\"]:checked');\n    const ingredientesPedido = [];\n\n    checks.forEach(cb => {\n        const cantidadInput = document.querySelector(`input.cantidad-pedido[data-ing-id=\"${cb.value}\"]`);\n        if (cantidadInput && cantidadInput.value) {\n            ingredientesPedido.push({\n                ingredienteId: parseInt(cb.value),\n                cantidad: parseFloat(cantidadInput.value),\n                precio_unitario: window.ingredientes.find(i => i.id === parseInt(cb.value))?.precio || 0\n            });\n        }\n    });\n\n    if (ingredientesPedido.length === 0) {\n        window.showToast('Selecciona al menos un ingrediente', 'warning');\n        return;\n    }\n\n    const pedido = {\n        proveedorId: parseInt(document.getElementById('ped-proveedor').value),\n        fecha: new Date().toISOString(),\n        estado: 'pendiente',\n        ingredientes: ingredientesPedido,\n        total: window.calcularTotalPedido()\n    };\n\n    window.showLoading();\n\n    try {\n        await window.api.createPedido(pedido);\n        await window.cargarDatos();\n        window.renderizarPedidos();\n        window.hideLoading();\n        window.showToast('Pedido creado', 'success');\n        window.cerrarFormularioPedido();\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error guardando pedido: ' + error.message, 'error');\n    }\n}\n\n/**\n * Elimina un pedido\n * @param {number} id - ID del pedido\n */\nexport async function eliminarPedido(id) {\n    const ped = window.pedidos.find(p => p.id === id);\n    if (!ped) return;\n\n    if (!confirm(`¬øEliminar el pedido #${id}?`)) return;\n\n    window.showLoading();\n\n    try {\n        await window.api.deletePedido(id);\n        await window.cargarDatos();\n        window.renderizarPedidos();\n        window.hideLoading();\n        window.showToast('Pedido eliminado', 'success');\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error eliminando pedido: ' + error.message, 'error');\n    }\n}\n\n/**\n * Marca un pedido como recibido (abre modal)\n * @param {number} id - ID del pedido\n */\nexport function marcarPedidoRecibido(id) {\n    window.pedidoRecibiendoId = id;\n    const ped = window.pedidos.find(p => p.id === id);\n    if (!ped) return;\n\n    const container = document.getElementById('modal-recibir-ingredientes');\n    let html = '';\n\n    ped.ingredientes.forEach(item => {\n        const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n        if (ing) {\n            html += `\n        <div style=\"display:flex;gap:10px;margin:10px 0;align-items:center;\">\n          <span style=\"flex:1;\">${ing.nombre}</span>\n          <span style=\"width:80px;text-align:right;\">Pedido: ${item.cantidad}</span>\n          <input type=\"number\" step=\"0.01\" min=\"0\" value=\"${item.cantidad}\" \n                 data-ing-id=\"${ing.id}\" data-precio=\"${ing.precio}\"\n                 class=\"cantidad-recibida\" \n                 style=\"width:100px;padding:5px;\">\n          <span style=\"width:60px;text-align:right;\">${ing.unidad}</span>\n        </div>\n      `;\n        }\n    });\n\n    container.innerHTML = html;\n    document.getElementById('modal-recibir').classList.add('active');\n}\n\n/**\n * Cierra el modal de recibir pedido\n */\nexport function cerrarModalRecibirPedido() {\n    document.getElementById('modal-recibir').classList.remove('active');\n    window.pedidoRecibiendoId = null;\n}\n\n/**\n * Confirma la recepci√≥n del pedido (actualiza stock)\n */\nexport async function confirmarRecepcionPedido() {\n    if (window.pedidoRecibiendoId === null) return;\n\n    const inputs = document.querySelectorAll('.cantidad-recibida');\n    const ped = window.pedidos.find(p => p.id === window.pedidoRecibiendoId);\n\n    window.showLoading();\n\n    try {\n        let totalRecibido = 0;\n\n        // Actualizar stock de cada ingrediente\n        for (const input of inputs) {\n            const ingId = parseInt(input.dataset.ingId);\n            const cantidadRecibida = parseFloat(input.value) || 0;\n            const precio = parseFloat(input.dataset.precio) || 0;\n\n            totalRecibido += cantidadRecibida * precio;\n\n            const ing = window.ingredientes.find(i => i.id === ingId);\n            if (ing) {\n                const nuevoStock = (ing.stockActual || 0) + cantidadRecibida;\n                await window.api.updateIngrediente(ingId, {\n                    ...ing,\n                    stockActual: nuevoStock\n                });\n            }\n        }\n\n        // Marcar pedido como recibido\n        await window.api.updatePedido(window.pedidoRecibiendoId, {\n            ...ped,\n            estado: 'recibido',\n            fecha_recepcion: new Date().toISOString(),\n            total_recibido: totalRecibido\n        });\n\n        await window.cargarDatos();\n        window.renderizarPedidos();\n        window.renderizarIngredientes();\n        window.hideLoading();\n        cerrarModalRecibirPedido();\n        window.showToast('Pedido recibido, stock actualizado', 'success');\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error recibiendo pedido: ' + error.message, 'error');\n    }\n}\n\n/**\n * Muestra detalles de un pedido en modal\n * @param {number} pedidoId - ID del pedido\n */\nexport function verDetallesPedido(pedidoId) {\n    window.pedidoViendoId = pedidoId;\n    const ped = window.pedidos.find(p => p.id === pedidoId);\n    if (!ped) return;\n\n    const prov = window.proveedores.find(p => p.id === ped.proveedorId);\n\n    document.getElementById('modal-pedido-id').textContent = `#${ped.id}`;\n    document.getElementById('modal-pedido-proveedor').textContent = prov ? prov.nombre : 'Sin proveedor';\n    document.getElementById('modal-pedido-fecha').textContent = new Date(ped.fecha).toLocaleString('es-ES');\n    document.getElementById('modal-pedido-estado').textContent = ped.estado;\n    document.getElementById('modal-pedido-estado').className = `badge ${ped.estado === 'recibido' ? 'badge-success' : 'badge-warning'}`;\n\n    let html = '<table><thead><tr><th>Ingrediente</th><th>Cantidad</th><th>Precio Unit.</th><th>Subtotal</th></tr></thead><tbody>';\n\n    ped.ingredientes.forEach(item => {\n        const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n        if (ing) {\n            const subtotal = item.cantidad * item.precio_unitario;\n            html += `<tr>`;\n            html += `<td>${ing.nombre}</td>`;\n            html += `<td>${item.cantidad} ${ing.unidad}</td>`;\n            html += `<td>${parseFloat(item.precio_unitario || 0).toFixed(2)}‚Ç¨</td>`;\n            html += `<td>${subtotal.toFixed(2)}‚Ç¨</td>`;\n            html += `</tr>`;\n        }\n    });\n\n    html += '</tbody></table>';\n    document.getElementById('modal-pedido-ingredientes').innerHTML = html;\n    document.getElementById('modal-pedido-total').textContent = parseFloat(ped.total || 0).toFixed(2) + '‚Ç¨';\n\n    if (ped.fecha_recepcion) {\n        document.getElementById('modal-pedido-recepcion').textContent = new Date(ped.fecha_recepcion).toLocaleString('es-ES');\n        document.getElementById('modal-pedido-total-recibido').textContent = parseFloat(ped.total_recibido || 0).toFixed(2) + '‚Ç¨';\n    } else {\n        document.getElementById('modal-pedido-recepcion').textContent = 'Pendiente';\n        document.getElementById('modal-pedido-total-recibido').textContent = '-';\n    }\n\n    document.getElementById('modal-ver-pedido').classList.add('active');\n}\n\n/**\n * Cierra el modal de ver pedido\n */\nexport function cerrarModalVerPedido() {\n    document.getElementById('modal-ver-pedido').classList.remove('active');\n    window.pedidoViendoId = null;\n}\n\n/**\n * Descarga PDF del pedido actual\n */\nexport function descargarPedidoPDF() {\n    if (window.pedidoViendoId === null) return;\n\n    const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n    const pedido = window.pedidos.find(p => p.id === window.pedidoViendoId);\n    const prov = window.proveedores.find(p => p.id === pedido.proveedorId);\n\n    // Crear HTML para imprimir\n    let html = `\n    <html>\n    <head>\n      <title>Pedido #${pedido.id}</title>\n      <style>\n        body { font-family: Arial, sans-serif; padding: 20px; }\n        h1 { color: #7c3aed; }\n        table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n        th { background: #7c3aed; color: white; }\n        .total { font-size: 18px; font-weight: bold; text-align: right; margin-top: 20px; }\n      </style>\n    </head>\n    <body>\n      <h1>Pedido #${pedido.id}</h1>\n      <p><strong>Restaurante:</strong> ${currentUser.nombre || 'La Caleta'}</p>\n      <p><strong>Proveedor:</strong> ${prov ? prov.nombre : 'Sin proveedor'}</p>\n      <p><strong>Fecha:</strong> ${new Date(pedido.fecha).toLocaleString('es-ES')}</p>\n      <p><strong>Estado:</strong> ${pedido.estado}</p>\n      <table>\n        <thead>\n          <tr><th>Ingrediente</th><th>Cantidad</th><th>Precio Unit.</th><th>Subtotal</th></tr>\n        </thead>\n        <tbody>\n  `;\n\n    pedido.ingredientes.forEach(item => {\n        const ing = window.ingredientes.find(i => i.id === item.ingredienteId);\n        if (ing) {\n            const subtotal = item.cantidad * item.precio_unitario;\n            html += `\n        <tr>\n          <td>${ing.nombre}</td>\n          <td>${item.cantidad} ${ing.unidad}</td>\n          <td>${parseFloat(item.precio_unitario || 0).toFixed(2)}‚Ç¨</td>\n          <td>${subtotal.toFixed(2)}‚Ç¨</td>\n        </tr>\n      `;\n        }\n    });\n\n    html += `\n        </tbody>\n      </table>\n      <div class=\"total\">Total: ${parseFloat(pedido.total || 0).toFixed(2)}‚Ç¨</div>\n    </body>\n    </html>\n  `;\n\n    // Abrir en nueva ventana para imprimir\n    const ventana = window.open('', '', 'width=800,height=600');\n    ventana.document.write(html);\n    ventana.document.close();\n    ventana.print();\n}\n","/**\n * Ventas UI Module\n * Funciones de interfaz de usuario para ventas\n */\n\n/**\n * Renderiza la tabla de ventas\n */\nexport async function renderizarVentas() {\n    try {\n        const ventas = await window.api.getSales();\n        const container = document.getElementById('tabla-ventas');\n\n        if (ventas.length === 0) {\n            container.innerHTML = `\n        <div class=\"empty-state\">\n          <div class=\"icon\">üí∞</div>\n          <h3>No hay ventas registradas</h3>\n        </div>\n      `;\n            return;\n        }\n\n        // Agrupar por fecha\n        const ventasPorFecha = {};\n        ventas.forEach(v => {\n            const fecha = new Date(v.fecha).toLocaleDateString('es-ES');\n            if (!ventasPorFecha[fecha]) ventasPorFecha[fecha] = [];\n            ventasPorFecha[fecha].push(v);\n        });\n\n        let html = '<table style=\"width:100%;border-collapse:collapse;\"><tbody>';\n\n        Object.keys(ventasPorFecha).sort((a, b) => new Date(b) - new Date(a)).forEach(fecha => {\n            const ventasDia = ventasPorFecha[fecha];\n            const totalDia = ventasDia.reduce((sum, v) => sum + parseFloat(v.total || 0), 0);\n\n            html += `<tr style=\"background:#F8FAFC;\"><td colspan=\"6\" style=\"padding:12px 16px;font-weight:600;color:#1E293B;border-bottom:1px solid #E2E8F0;\">${fecha} - Total: ${totalDia.toFixed(2)}‚Ç¨</td></tr>`;\n\n            ventasDia.forEach(v => {\n                const hora = new Date(v.fecha).toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });\n                html += `<tr><td style=\"padding:8px 16px 8px 32px;color:#64748B;\">${fecha}</td><td style=\"padding:8px 16px;color:#64748B;\">${hora}</td><td style=\"padding:8px 16px;color:#1E293B;\">${v.receta_nombre}</td><td style=\"padding:8px 16px;text-align:center;color:#64748B;\">${v.cantidad}</td><td style=\"padding:8px 16px;text-align:right;\"><strong style=\"color:#1E293B;\">${parseFloat(v.total).toFixed(2)}‚Ç¨</strong></td><td style=\"padding:8px 16px;text-align:center;\"><button class=\"icon-btn delete\" onclick=\"window.eliminarVenta(${v.id})\" title=\"Eliminar\">üóëÔ∏è</button></td></tr>`;\n            });\n        });\n\n        html += '</tbody></table>';\n        container.innerHTML = html;\n\n    } catch (error) {\n        console.error('Error renderizando ventas:', error);\n        window.showToast('Error cargando ventas', 'error');\n    }\n}\n\n/**\n * Exporta ventas a Excel\n */\nexport function exportarVentas() {\n    window.api.getSales().then(ventas => {\n        const columnas = [\n            { header: 'ID', key: 'id' },\n            { header: 'Fecha', value: (v) => new Date(v.fecha).toLocaleDateString('es-ES') },\n            { header: 'Hora', value: (v) => new Date(v.fecha).toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' }) },\n            {\n                header: 'C√≥digo Receta', value: (v) => {\n                    const rec = window.recetas.find(r => r.id === v.receta_id);\n                    return rec?.codigo || `REC-${String(v.receta_id).padStart(4, '0')}`;\n                }\n            },\n            { header: 'Descripci√≥n', value: (v) => v.receta_nombre || (window.recetas.find(r => r.id === v.receta_id)?.nombre || 'Desconocida') },\n            { header: 'Cantidad', key: 'cantidad' },\n            { header: 'Precio Unitario (‚Ç¨)', value: (v) => parseFloat(v.precio_unitario || 0).toFixed(2) },\n            { header: 'Total (‚Ç¨)', value: (v) => parseFloat(v.total || 0).toFixed(2) }\n        ];\n\n        window.exportarAExcel(ventas, 'Ventas_LaCaleta', columnas);\n    });\n}\n","/**\n * Ventas CRUD Module\n * Funciones de eliminar ventas\n */\n\n/**\n * Elimina una venta\n */\nexport async function eliminarVenta(id) {\n    if (!confirm('¬øEliminar esta venta?')) return;\n\n    window.showLoading();\n\n    try {\n        await window.api.deleteSale(id);\n        await window.renderizarVentas();\n        window.hideLoading();\n        window.showToast('Venta eliminada', 'success');\n    } catch (error) {\n        window.hideLoading();\n        console.error('Error:', error);\n        window.showToast('Error eliminando venta: ' + error.message, 'error');\n    }\n}\n","/**\n * Dashboard Module\n * Actualizaci√≥n de KPIs del dashboard\n */\n\n/**\n * Actualiza todos los KPIs del dashboard\n */\nexport async function actualizarKPIs() {\n    try {\n        // 1. INGRESOS TOTALES\n        const ventas = await window.api.getSales();\n        const ingresos = ventas.reduce((sum, v) => sum + parseFloat(v.total), 0);\n        const ingresosEl = document.getElementById('kpi-ingresos');\n        if (ingresosEl) ingresosEl.textContent = ingresos.toFixed(0) + '‚Ç¨';\n\n        // 2. PEDIDOS ACTIVOS\n        const pedidosActivos = window.pedidos.filter(p => p.estado === 'pendiente').length;\n        const pedidosEl = document.getElementById('kpi-pedidos');\n        if (pedidosEl) pedidosEl.textContent = pedidosActivos;\n\n        // 3. STOCK BAJO\n        const stockBajo = window.ingredientes.filter(ing => {\n            const stock = parseFloat(ing.stockActual || 0);\n            const minimo = parseFloat(ing.stockMinimo || 0);\n            return stock < minimo;\n        }).length;\n        const stockEl = document.getElementById('kpi-stock');\n        if (stockEl) stockEl.textContent = stockBajo;\n\n        // 4. MARGEN PROMEDIO\n        const recetasConMargen = window.recetas.filter(r => r.precio_venta > 0);\n        if (recetasConMargen.length > 0) {\n            const margenTotal = recetasConMargen.reduce((sum, rec) => {\n                const coste = window.calcularCosteRecetaCompleto ? window.calcularCosteRecetaCompleto(rec) : 0;\n                const margen = rec.precio_venta > 0 ? ((rec.precio_venta - coste) / rec.precio_venta * 100) : 0;\n                return sum + margen;\n            }, 0);\n            const margenPromedio = margenTotal / recetasConMargen.length;\n            const margenEl = document.getElementById('kpi-margen');\n            if (margenEl) margenEl.textContent = Math.round(margenPromedio) + '%';\n        }\n\n    } catch (error) {\n        console.error('Error actualizando KPIs:', error);\n    }\n}\n","/**\n * PDF Generator Module\n * Genera PDFs profesionales para recetas, ingredientes y pedidos\n */\n\n/**\n * Genera PDF profesional de una receta con logo y formato premium\n * @param {Object} receta - Objeto receta con ingredientes\n * @param {Array} ingredientes - Array de todos los ingredientes disponibles\n */\nexport function generarPDFReceta(receta, ingredientes) {\n    // Verificar que jsPDF est√° cargado\n    if (!window.jspdf) {\n        console.error('jsPDF no est√° cargado. Aseg√∫rate de que los scripts CDN est√°n cargados.');\n        window.showToast?.('Error: Librer√≠a PDF no cargada', 'error');\n        return null;\n    }\n\n    const { jsPDF } = window.jspdf;\n    const doc = new jsPDF();\n\n    // Colores brand\n    const colorPrimary = [255, 107, 53]; // #FF6B35\n    const colorText = [30, 41, 59]; // #1E293B\n    const colorSecondary = [100, 116, 139]; // #64748B\n\n    // === HEADER CON LOGO ===\n    doc.setFillColor(...colorPrimary);\n    doc.rect(0, 0, 210, 40, 'F');\n\n    // MindLoop CostOS\n    doc.setTextColor(255, 255, 255);\n    doc.setFontSize(24);\n    doc.setFont('helvetica', 'bold');\n    doc.text('MindLoop CostOS', 105, 18, { align: 'center' });\n\n    doc.setFontSize(12);\n    doc.setFont('helvetica', 'normal');\n    doc.text('Restaurant Intelligence Platform', 105, 28, { align: 'center' });\n\n    // === INFORMACI√ìN RECETA ===\n    let yPos = 55;\n\n    doc.setTextColor(...colorText);\n    doc.setFontSize(18);\n    doc.setFont('helvetica', 'bold');\n    doc.text(`RECETA: ${receta.nombre.toUpperCase()}`, 20, yPos);\n\n    yPos += 10;\n    doc.setFontSize(10);\n    doc.setFont('helvetica', 'normal');\n    doc.setTextColor(...colorSecondary);\n    doc.text(`C√≥digo: ${receta.codigo || 'N/A'}`, 20, yPos);\n    doc.text(`Categor√≠a: ${receta.categoria || 'N/A'}`, 80, yPos);\n    doc.text(`Porciones: ${receta.porciones || 1}`, 140, yPos);\n\n    // L√≠nea de separaci√≥n\n    yPos += 8;\n    doc.setDrawColor(...colorPrimary);\n    doc.setLineWidth(0.5);\n    doc.line(20, yPos, 190, yPos);\n\n    // === TABLA DE INGREDIENTES ===\n    yPos += 10;\n    doc.setTextColor(...colorText);\n    doc.setFontSize(14);\n    doc.setFont('helvetica', 'bold');\n    doc.text('INGREDIENTES:', 20, yPos);\n\n    yPos += 8;\n\n    // Calcular costes\n    let costoTotal = 0;\n    const ingredientesData = [];\n\n    if (receta.ingredientes && Array.isArray(receta.ingredientes)) {\n        receta.ingredientes.forEach(item => {\n            const ing = ingredientes.find(i => i.id === item.ingredienteId || i.id === item.ingrediente_id);\n            if (ing) {\n                const cantidad = item.cantidad || 0;\n                const precio = ing.precio || 0;\n                const subtotal = cantidad * precio;\n                costoTotal += subtotal;\n\n                ingredientesData.push([\n                    ing.nombre,\n                    `${cantidad} ${ing.unidad || 'kg'}`,\n                    `${precio.toFixed(2)}‚Ç¨`,\n                    `${subtotal.toFixed(2)}‚Ç¨`\n                ]);\n            }\n        });\n    }\n\n    // Usar autoTable para tabla profesional\n    doc.autoTable({\n        startY: yPos,\n        head: [['Ingrediente', 'Cantidad', 'Precio/Unidad', 'Subtotal']],\n        body: ingredientesData,\n        theme: 'striped',\n        headStyles: {\n            fillColor: colorPrimary,\n            textColor: [255, 255, 255],\n            fontSize: 10,\n            fontStyle: 'bold',\n            halign: 'left'\n        },\n        bodyStyles: {\n            fontSize: 9,\n            textColor: colorText\n        },\n        alternateRowStyles: {\n            fillColor: [248, 250, 252]\n        },\n        columnStyles: {\n            0: { cellWidth: 70 },\n            1: { cellWidth: 40, halign: 'center' },\n            2: { cellWidth: 35, halign: 'right' },\n            3: { cellWidth: 35, halign: 'right' }\n        },\n        margin: { left: 20, right: 20 }\n    });\n\n    // === RESUMEN FINANCIERO ===\n    yPos = doc.lastAutoTable.finalY + 15;\n\n    doc.setDrawColor(...colorPrimary);\n    doc.setLineWidth(0.5);\n    doc.line(20, yPos, 190, yPos);\n\n    yPos += 12;\n\n    const precioVenta = receta.precio_venta || 0;\n    const margen = precioVenta > 0 ? ((precioVenta - costoTotal) / precioVenta * 100) : 0;\n\n    doc.setFontSize(12);\n    doc.setFont('helvetica', 'bold');\n    doc.setTextColor(...colorText);\n\n    doc.text(`COSTE TOTAL:`, 20, yPos);\n    doc.text(`${costoTotal.toFixed(2)}‚Ç¨`, 100, yPos, { align: 'right' });\n\n    yPos += 8;\n    doc.text(`PRECIO VENTA:`, 20, yPos);\n    doc.setTextColor(16, 185, 129); // Verde\n    doc.text(`${precioVenta.toFixed(2)}‚Ç¨`, 100, yPos, { align: 'right' });\n\n    yPos += 8;\n    doc.setTextColor(...colorText);\n    doc.text(`BENEFICIO:`, 20, yPos);\n    const beneficio = precioVenta - costoTotal;\n    doc.setTextColor(beneficio >= 0 ? [16, 185, 129] : [239, 68, 68]);\n    doc.text(`${beneficio.toFixed(2)}‚Ç¨`, 100, yPos, { align: 'right' });\n\n    yPos += 8;\n    doc.setTextColor(...colorText);\n    doc.text(`MARGEN:`, 20, yPos);\n    doc.setTextColor(margen >= 25 ? [16, 185, 129] : margen >= 15 ? [245, 158, 11] : [239, 68, 68]);\n    doc.text(`${margen.toFixed(1)}%`, 100, yPos, { align: 'right' });\n\n    // === FOOTER ===\n    const fechaActual = new Date().toLocaleDateString('es-ES');\n    doc.setFontSize(8);\n    doc.setTextColor(...colorSecondary);\n    doc.setFont('helvetica', 'normal');\n    doc.text(`Generado el ${fechaActual} por MindLoop CostOS`, 105, 280, { align: 'center' });\n\n    // Descargar PDF\n    const nombreArchivo = `Receta_${receta.nombre.replace(/\\s+/g, '_')}_${Date.now()}.pdf`;\n    doc.save(nombreArchivo);\n\n    return doc;\n}\n\n/**\n * Genera PDF de lista completa de ingredientes\n * @param {Array} ingredientes - Array de ingredientes\n */\nexport function generarPDFIngredientes(ingredientes) {\n    const { jsPDF } = window.jspdf;\n    const doc = new jsPDF();\n\n    const colorPrimary = [255, 107, 53];\n    const colorText = [30, 41, 59];\n    const colorSecondary = [100, 116, 139];\n\n    // Header\n    doc.setFillColor(...colorPrimary);\n    doc.rect(0, 0, 210, 35, 'F');\n\n    doc.setTextColor(255, 255, 255);\n    doc.setFontSize(20);\n    doc.setFont('helvetica', 'bold');\n    doc.text('LISTA DE INGREDIENTES', 105, 22, { align: 'center' });\n\n    // Datos tabla\n    const data = ingredientes.map(ing => [\n        ing.nombre,\n        ing.unidad || 'kg',\n        `${(ing.precio || 0).toFixed(2)}‚Ç¨`,\n        `${(ing.stock_actual || 0).toFixed(2)}`,\n        ing.proveedor?.nombre || 'N/A'\n    ]);\n\n    doc.autoTable({\n        startY: 45,\n        head: [['Ingrediente', 'Unidad', 'Precio', 'Stock', 'Proveedor']],\n        body: data,\n        theme: 'striped',\n        headStyles: {\n            fillColor: colorPrimary,\n            textColor: [255, 255, 255],\n            fontSize: 10,\n            fontStyle: 'bold'\n        },\n        bodyStyles: {\n            fontSize: 9,\n            textColor: colorText\n        },\n        alternateRowStyles: {\n            fillColor: [248, 250, 252]\n        },\n        columnStyles: {\n            2: { halign: 'right' },\n            3: { halign: 'right' }\n        }\n    });\n\n    // Footer\n    const fechaActual = new Date().toLocaleDateString('es-ES');\n    doc.setFontSize(8);\n    doc.setTextColor(...colorSecondary);\n    doc.text(`Generado el ${fechaActual}`, 105, 280, { align: 'center' });\n\n    doc.save(`Ingredientes_${Date.now()}.pdf`);\n    return doc;\n}\n\n/**\n * Expone funciones globalmente para compatibilidad\n */\nif (typeof window !== 'undefined') {\n    window.generarPDFReceta = generarPDFReceta;\n    window.generarPDFIngredientes = generarPDFIngredientes;\n}\n","/**\n * Helper para descargar PDF de receta\n * Wrapper que encuentra la receta y llama al generador PDF\n */\nexport function descargarPDFReceta(recetaId) {\n    const receta = window.recetas.find(r => r.id === recetaId);\n    if (!receta) {\n        window.showToast('Receta no encontrada', 'error');\n        return;\n    }\n\n    // Llamar al generador PDF\n    if (typeof window.generarPDFReceta === 'function') {\n        window.generarPDFReceta(receta, window.ingredientes);\n        window.showToast('PDF generado correctamente', 'success');\n    } else {\n        console.error('generarPDFReceta no est√° disponible');\n        window.showToast('Error: M√≥dulo PDF no cargado', 'error');\n    }\n}\n\n// Exponer globalmente\nwindow.descargarPDFReceta = descargarPDFReceta;\n","/**\n * ============================================\n * main.js - Punto de Entrada de LaCaletaCost\n * ============================================\n * \n * Este archivo es el CONTROLADOR CENTRAL de la aplicaci√≥n.\n * \n * ARQUITECTURA:\n * - Los m√≥dulos ES6 en src/modules/ contienen la l√≥gica\n * - Este archivo expone las funciones en window.* para\n *   compatibilidad con los onclick en index.html\n * - Al cargarse DESPU√âS del c√≥digo inline de index.html,\n *   las funciones aqu√≠ SOBRESCRIBEN las legacy\n * \n * MANTENIMIENTO:\n * - Para modificar funcionalidad, edita el m√≥dulo ES6\n * - No edites el c√≥digo legacy en index.html\n * - Ver ARQUITECTURA.md para m√°s detalles\n * \n * @author LaCaletaCost Team\n * @version 2.0.0 (Arquitectura Modular)\n * @date 2025-12-21\n */\n\n// ============================================\n// UTILIDADES CORE\n// ============================================\nimport { showToast } from './ui/toast.js';\nimport * as DOM from './utils/dom-helpers.js';\nimport * as Helpers from './utils/helpers.js';\n\nwindow.showToast = showToast;\nwindow.DOM = DOM;\nObject.assign(window, DOM);\n\n// Utilidades adicionales\nwindow.showLoading = Helpers.showLoading;\nwindow.hideLoading = Helpers.hideLoading;\nwindow.exportarAExcel = Helpers.exportarAExcel;\nwindow.formatCurrency = Helpers.formatCurrency;\nwindow.formatDate = Helpers.formatDate;\n\n// ============================================\n// M√ìDULO: INGREDIENTES ‚úÖ (Legacy comentado)\n// ============================================\nimport * as IngredientesUI from './modules/ingredientes/ingredientes-ui.js';\nimport * as IngredientesCRUD from './modules/ingredientes/ingredientes-crud.js';\n\n// UI\nwindow.renderizarIngredientes = IngredientesUI.renderizarIngredientes;\nwindow.mostrarFormularioIngrediente = IngredientesUI.mostrarFormularioIngrediente;\nwindow.cerrarFormularioIngrediente = IngredientesUI.cerrarFormularioIngrediente;\nwindow.exportarIngredientes = IngredientesUI.exportarIngredientes;\n\n// CRUD\nwindow.guardarIngrediente = IngredientesCRUD.guardarIngrediente;\nwindow.editarIngrediente = IngredientesCRUD.editarIngrediente;\nwindow.eliminarIngrediente = IngredientesCRUD.eliminarIngrediente;\n\n// ============================================\n// M√ìDULO: RECETAS ‚úÖ (Legacy comentado)\n// ============================================\nimport * as RecetasUI from './modules/recetas/recetas-ui.js';\nimport * as RecetasCRUD from './modules/recetas/recetas-crud.js';\n\n// UI\nwindow.renderizarRecetas = RecetasUI.renderizarRecetas;\nwindow.mostrarFormularioReceta = RecetasUI.mostrarFormularioReceta;\nwindow.cerrarFormularioReceta = RecetasUI.cerrarFormularioReceta;\nwindow.agregarIngredienteReceta = RecetasUI.agregarIngredienteReceta;\nwindow.calcularCosteReceta = RecetasUI.calcularCosteReceta;\nwindow.exportarRecetas = RecetasUI.exportarRecetas;\n\n// CRUD\nwindow.guardarReceta = RecetasCRUD.guardarReceta;\nwindow.editarReceta = RecetasCRUD.editarReceta;\nwindow.eliminarReceta = RecetasCRUD.eliminarReceta;\nwindow.calcularCosteRecetaCompleto = RecetasCRUD.calcularCosteRecetaCompleto;\n\n// Producci√≥n\nwindow.abrirModalProducir = RecetasCRUD.abrirModalProducir;\nwindow.cerrarModalProducir = RecetasCRUD.cerrarModalProducir;\nwindow.actualizarDetalleDescuento = RecetasCRUD.actualizarDetalleDescuento;\nwindow.confirmarProduccion = RecetasCRUD.confirmarProduccion;\n\n// ============================================\n// M√ìDULO: PROVEEDORES ‚úÖ (Legacy comentado)\n// ============================================\nimport * as ProveedoresUI from './modules/proveedores/proveedores-ui.js';\nimport * as ProveedoresCRUD from './modules/proveedores/proveedores-crud.js';\n\n// UI\nwindow.renderizarProveedores = ProveedoresUI.renderizarProveedores;\nwindow.mostrarFormularioProveedor = ProveedoresUI.mostrarFormularioProveedor;\nwindow.cerrarFormularioProveedor = ProveedoresUI.cerrarFormularioProveedor;\nwindow.cargarIngredientesProveedor = ProveedoresUI.cargarIngredientesProveedor;\nwindow.filtrarIngredientesProveedor = ProveedoresUI.filtrarIngredientesProveedor;\nwindow.verProveedorDetalles = ProveedoresUI.verProveedorDetalles;\nwindow.cerrarModalVerProveedor = ProveedoresUI.cerrarModalVerProveedor;\n\n// CRUD\nwindow.guardarProveedor = ProveedoresCRUD.guardarProveedor;\nwindow.editarProveedor = ProveedoresCRUD.editarProveedor;\nwindow.eliminarProveedor = ProveedoresCRUD.eliminarProveedor;\n\n// ============================================\n// M√ìDULO: PEDIDOS ‚öôÔ∏è (H√≠brido - ES6 tiene prioridad)\n// ============================================\nimport * as PedidosUI from './modules/pedidos/pedidos-ui.js';\nimport * as PedidosCRUD from './modules/pedidos/pedidos-crud.js';\n\n// UI\nwindow.renderizarPedidos = PedidosUI.renderizarPedidos;\nwindow.mostrarFormularioPedido = PedidosUI.mostrarFormularioPedido;\nwindow.cerrarFormularioPedido = PedidosUI.cerrarFormularioPedido;\nwindow.cargarIngredientesPedido = PedidosUI.cargarIngredientesPedido;\nwindow.agregarIngredientePedido = PedidosUI.agregarIngredientePedido;\nwindow.calcularTotalPedido = PedidosUI.calcularTotalPedido;\nwindow.exportarPedidos = PedidosUI.exportarPedidos;\n\n// CRUD\nwindow.guardarPedido = PedidosCRUD.guardarPedido;\nwindow.eliminarPedido = PedidosCRUD.eliminarPedido;\nwindow.marcarPedidoRecibido = PedidosCRUD.marcarPedidoRecibido;\nwindow.cerrarModalRecibirPedido = PedidosCRUD.cerrarModalRecibirPedido;\nwindow.confirmarRecepcionPedido = PedidosCRUD.confirmarRecepcionPedido;\nwindow.verDetallesPedido = PedidosCRUD.verDetallesPedido;\nwindow.cerrarModalVerPedido = PedidosCRUD.cerrarModalVerPedido;\nwindow.descargarPedidoPDF = PedidosCRUD.descargarPedidoPDF;\n\n// ============================================\n// M√ìDULO: VENTAS ‚öôÔ∏è (H√≠brido - ES6 tiene prioridad)\n// ============================================\nimport * as VentasUI from './modules/ventas/ventas-ui.js';\nimport * as VentasCRUD from './modules/ventas/ventas-crud.js';\n\n// UI\nwindow.renderizarVentas = VentasUI.renderizarVentas;\nwindow.exportarVentas = VentasUI.exportarVentas;\n\n// CRUD\nwindow.eliminarVenta = VentasCRUD.eliminarVenta;\n\n// ============================================\n// M√ìDULO: DASHBOARD ‚öôÔ∏è (H√≠brido - ES6 tiene prioridad)\n// ============================================\nimport * as Dashboard from './modules/dashboard/dashboard.js';\n\nwindow.actualizarKPIs = Dashboard.actualizarKPIs;\n\n// ============================================\n// M√ìDULO: EXPORT PDF\n// ============================================\nimport * as PDFGenerator from './modules/export/pdf-generator.js';\nimport { descargarPDFReceta } from './modules/export/pdf-helper.js';\n\nwindow.generarPDFReceta = PDFGenerator.generarPDFReceta;\nwindow.generarPDFIngredientes = PDFGenerator.generarPDFIngredientes;\nwindow.descargarPDFReceta = descargarPDFReceta;\n\n// ============================================\n// VARIABLES GLOBALES DE ESTADO\n// ============================================\nwindow.editandoIngredienteId = null;\nwindow.editandoRecetaId = null;\nwindow.editandoPedidoId = null;\nwindow.editandoProveedorId = null;\n\n// ============================================\n// LOG DE INICIALIZACI√ìN\n// ============================================\nconsole.log('');\nconsole.log('üçΩÔ∏è LaCaletaCost v2.0.0');\nconsole.log('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ');\nconsole.log('‚úÖ M√≥dulo Ingredientes - ACTIVO');\nconsole.log('‚úÖ M√≥dulo Recetas - ACTIVO');\nconsole.log('‚úÖ M√≥dulo Proveedores - ACTIVO');\nconsole.log('‚úÖ M√≥dulo Pedidos - ACTIVO');\nconsole.log('‚úÖ M√≥dulo Ventas - ACTIVO');\nconsole.log('‚úÖ M√≥dulo Dashboard - ACTIVO');\nconsole.log('‚úÖ M√≥dulo Export PDF - ACTIVO');\nconsole.log('‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ');\nconsole.log('üöÄ Todos los m√≥dulos cargados');\nconsole.log('');\n"],"names":["showToast","message","type","container","toast","icons","messageEl","progressBar","style","getElement","id","context","element","setElementText","text","fallback","setElementHTML","html","getInputValue","setInputValue","value","addElementClass","className","removeElementClass","toggleElementClass","showElement","hideElement","showLoading","overlay","hideLoading","exportarAExcel","datos","nombreArchivo","columnas","datosExcel","item","fila","col","wb","ws","fecha","error","formatCurrency","formatDate","date","formatDateTime","debounce","func","wait","timeout","args","later","renderizarIngredientes","busqueda","_b","_a","ingredientes","proveedores","filtrados","ing","nombreProv","getNombreProveedor","resumen","stockActual","stockMinimo","stockBajo","mostrarFormularioIngrediente","actualizarSelectProveedores","form","input","cerrarFormularioIngrediente","formElement","title","btn","select","prov","proveedorId","p","exportarIngredientes","guardarIngrediente","event","ingrediente","editandoId","ingredienteId","proveedor","ingredientesDelProveedor","editarIngrediente","i","nombreEl","provEl","precioEl","unidadEl","stockEl","minEl","titleEl","btnEl","eliminarIngrediente","mostrarFormularioReceta","cerrarFormularioReceta","agregarIngredienteReceta","lista","optionsHtml","calcularCosteReceta","items","costeTotal","costeDiv","costeSpan","precioVenta","margenSpan","margen","renderizarRecetas","filtradas","r","rec","coste","pct","exportarRecetas","sum","guardarReceta","ingredientesReceta","receta","editarReceta","lastItem","eliminarReceta","calcularCosteRecetaCompleto","total","precio","abrirModalProducir","cerrarModalProducir","actualizarDetalleDescuento","cant","confirmarProduccion","falta","msg","necesario","nuevoStock","mostrarFormularioProveedor","cargarIngredientesProveedor","cerrarFormularioProveedor","seleccionados","checked","filtrarIngredientesProveedor","label","renderizarProveedores","ingredientesCount","verProveedorDetalles","info","ingHtml","ingId","cerrarModalVerProveedor","guardarProveedor","checks","ingredientesIds","cb","editarProveedor","eliminarProveedor","mostrarFormularioPedido","cerrarFormularioPedido","cargarIngredientesPedido","cantidadInput","agregarIngredientePedido","calcularTotalPedido","totalDiv","renderizarPedidos","filtro","pedidosFiltrados","ped","estadoClass","exportarPedidos","pr","guardarPedido","ingredientesPedido","pedido","eliminarPedido","marcarPedidoRecibido","cerrarModalRecibirPedido","confirmarRecepcionPedido","inputs","totalRecibido","cantidadRecibida","verDetallesPedido","pedidoId","subtotal","cerrarModalVerPedido","descargarPedidoPDF","currentUser","ventana","renderizarVentas","ventas","ventasPorFecha","v","a","b","ventasDia","totalDia","hora","exportarVentas","eliminarVenta","actualizarKPIs","ingresos","ingresosEl","pedidosActivos","pedidosEl","stock","minimo","recetasConMargen","margenPromedio","margenEl","generarPDFReceta","jsPDF","doc","colorPrimary","colorText","colorSecondary","yPos","costoTotal","ingredientesData","cantidad","beneficio","fechaActual","generarPDFIngredientes","data","descargarPDFReceta","recetaId","DOM","Helpers.showLoading","Helpers.hideLoading","Helpers.exportarAExcel","Helpers.formatCurrency","Helpers.formatDate","IngredientesUI.renderizarIngredientes","IngredientesUI.mostrarFormularioIngrediente","IngredientesUI.cerrarFormularioIngrediente","IngredientesUI.exportarIngredientes","IngredientesCRUD.guardarIngrediente","IngredientesCRUD.editarIngrediente","IngredientesCRUD.eliminarIngrediente","RecetasUI.renderizarRecetas","RecetasUI.mostrarFormularioReceta","RecetasUI.cerrarFormularioReceta","RecetasUI.agregarIngredienteReceta","RecetasUI.calcularCosteReceta","RecetasUI.exportarRecetas","RecetasCRUD.guardarReceta","RecetasCRUD.editarReceta","RecetasCRUD.eliminarReceta","RecetasCRUD.calcularCosteRecetaCompleto","RecetasCRUD.abrirModalProducir","RecetasCRUD.cerrarModalProducir","RecetasCRUD.actualizarDetalleDescuento","RecetasCRUD.confirmarProduccion","ProveedoresUI.renderizarProveedores","ProveedoresUI.mostrarFormularioProveedor","ProveedoresUI.cerrarFormularioProveedor","ProveedoresUI.cargarIngredientesProveedor","ProveedoresUI.filtrarIngredientesProveedor","ProveedoresUI.verProveedorDetalles","ProveedoresUI.cerrarModalVerProveedor","ProveedoresCRUD.guardarProveedor","ProveedoresCRUD.editarProveedor","ProveedoresCRUD.eliminarProveedor","PedidosUI.renderizarPedidos","PedidosUI.mostrarFormularioPedido","PedidosUI.cerrarFormularioPedido","PedidosUI.cargarIngredientesPedido","PedidosUI.agregarIngredientePedido","PedidosUI.calcularTotalPedido","PedidosUI.exportarPedidos","PedidosCRUD.guardarPedido","PedidosCRUD.eliminarPedido","PedidosCRUD.marcarPedidoRecibido","PedidosCRUD.cerrarModalRecibirPedido","PedidosCRUD.confirmarRecepcionPedido","PedidosCRUD.verDetallesPedido","PedidosCRUD.cerrarModalVerPedido","PedidosCRUD.descargarPedidoPDF","VentasUI.renderizarVentas","VentasUI.exportarVentas","VentasCRUD.eliminarVenta","Dashboard.actualizarKPIs","PDFGenerator.generarPDFReceta","PDFGenerator.generarPDFIngredientes"],"mappings":"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"}